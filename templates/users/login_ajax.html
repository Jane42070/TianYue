<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>ajax登录</title>
	<script src="/static/js/jquery-3.4.1.min.js"></script>
	<script type="text/javascript">
		$(function () {
			$('#btnLogin').click(function () {
				// 1. 获取提交的用户名和密码
				uid = $('#uid').val()
				upassword = $('#upassword').val()
				// 2. 发起POST ajax 请求，/login_ajax_check，携带用户名和密码
				$.ajax({
					'url': '/login_ajax_check',
					'type': 'POST',
					'data': {
						'uid': uid,
						'upassword': upassword
					},
					'dataType': 'json',
				}).done(function (data) {
					// 登录成功 {'res': 1}
					// 登录失败 {'res': 0}
					if (data.res == 0) {
						$('#errmsg').show().html('用户名或密码错误')
					}
					else {
						// 跳转到首页
						location.href = '/login_ajax'
					}
				})

			})
		})
	</script>
	<style type="text/css" media="screen">
		#errmsg {
			display: none;
			color: red;
		}
	</style>
</head>

<body>
	用户名：<input type="text" name="uid" id="uid" value="">
	密码：<input type="password" name="upassword" id="upassword" value="">
	<input type="button" name="" id="btnLogin" value="登录">
	<div id="errmsg"></div>
</body>

</html>
